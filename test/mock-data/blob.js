module.exports =

{
    "sha": "5b4bb01e0edcff42c30c93e91ed66171947b99e3",
    "size": 28406,
    "url": "https://api.github.com/repos/rhyolight/sprinter.js/git/blobs/5b4bb01e0edcff42c30c93e91ed66171947b99e3",
    "content": "dmFyIEdpdEh1YkFwaSA9IHJlcXVpcmUoJ2dpdGh1YicpCiAgLCBfID0gcmVx\ndWlyZSgnbG9kYXNoJykKICAsIGFzeW5jID0gcmVxdWlyZSgnYXN5bmMnKQog\nICwgb3JpZ2luYWxQcm90b3R5cGVGdW5jdGlvbnMgPSB7fQogICwgbWFya2Rv\nd25UYXNrc1JlZ2V4ID0gL14oKFwtfFwqKSBcWy5cXS4qKSQvZ20KICAsIHN1\nYnRhc2tSZWdleCA9IC8oaHR0cHM/XDpcL1wvKHd3d1wuKT8uKlwvaXNzdWVz\nXC98XCMpKFxkKykvCiAgOwoKLyoqCiAqIENvbnZlcnRzIGFuIGFycmF5IG9m\nIHNsdWcgaWRlbnRpZmllcnMgbGlrZSAib3JnL3JlcG8iIGludG8gYW4gYXJy\nYXkgb2YgYXJyYXlzCiAqIGxpa2U6CiAqIFsgWyJvcmciLCAicmVwbyJdIF0K\nICovCmZ1bmN0aW9uIGNvbnZlcnRTbHVnc1RvT2JqZWN0cyhzbHVncykgewog\nICAgcmV0dXJuIHNsdWdzLm1hcChmdW5jdGlvbihzbHVnKSB7CiAgICAgICAg\ncmV0dXJuIHNsdWcuc3BsaXQoJy8nKTsKICAgIH0pOwp9CgovKioKICogU29y\ndHMgYXJyYXkgb2YgaXNzdWUgb2JqZWN0cyBieSBsYXN0IHVwZGF0ZWQgZGF0\nZS4KICovCmZ1bmN0aW9uIHNvcnRJc3N1ZXMoaXNzdWVzKSB7CiAgICB2YXIg\nc29ydGVkOwogICAgLy8gSXNzdWVzIG1pZ2h0IGJlIHByZS1hcnJhbmdlZCBi\neSBzdXBlci9zdWIgdGFza3MuCiAgICBpZiAoT2JqZWN0LmtleXMoaXNzdWVz\nKS5pbmRleE9mKCdzdXBlcnMnKSA+IC0xKSB7CiAgICAgICAgLy8gTmV0d29y\nayBmb3JtYXQgaXNzdWUgc29ydAogICAgICAgIGlzc3Vlcy5zdXBlcnMgPSBf\nLnNvcnRCeShpc3N1ZXMuc3VwZXJzLCBmdW5jdGlvbihpc3N1ZSkgewogICAg\nICAgICAgICByZXR1cm4gbmV3IERhdGUoaXNzdWUudXBkYXRlZF9hdCk7CiAg\nICAgICAgfSkucmV2ZXJzZSgpOwoKICAgICAgICBpc3N1ZXMuc2luZ2xldG9u\ncyA9IF8uc29ydEJ5KGlzc3Vlcy5zaW5nbGV0b25zLCBmdW5jdGlvbihpc3N1\nZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoaXNzdWUudXBkYXRl\nZF9hdCk7CiAgICAgICAgfSkucmV2ZXJzZSgpOwogICAgICAgIHNvcnRlZCA9\nIGlzc3VlczsKICAgIH0gZWxzZSB7CiAgICAgICAgc29ydGVkID0gXy5zb3J0\nQnkoaXNzdWVzLCBmdW5jdGlvbihpc3N1ZSkgewogICAgICAgICAgICByZXR1\ncm4gbmV3IERhdGUoaXNzdWUudXBkYXRlZF9hdCk7CiAgICAgICAgfSkucmV2\nZXJzZSgpOwogICAgfQogICAgcmV0dXJuIHNvcnRlZDsKfQoKZnVuY3Rpb24g\nYXR0YWNoUmVhZGFibGVFcnJvck1lc3NhZ2UoZXJyKSB7CiAgICB2YXIgZXJy\nb3JNZXNzYWdlOwoKICAgIC8vIElmIHRoZSBlcnJvciBkb2Vzbid0IGhhdmUg\nYSAicmVwbyIgYXR0YWNoZWQgdG8gaXQsIGl0J3MgYSBoYXJkIGVycm9yLgog\nICAgLy8gVGhpcyBzaG91bGQgYWx3YXlzIGJlIGF0dGFjaGVkIGJ5IHNwcmlu\ndGVyIGJlZm9yZSBpdCBnZXRzIHRvIHRoZSB1c2VyLgogICAgaWYgKCEgZXJy\nLnJlcG8pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGRvZXMg\nbm90IGlkZW50aWZ5IGEgcmVwb3NpdG9yeSEnKTsKICAgIH0KCiAgICB0cnkg\newogICAgICAgIGVycm9yTWVzc2FnZSA9IEpTT04ucGFyc2UoZXJyLm1lc3Nh\nZ2UpOwogICAgfSBjYXRjaCAoanNvblBhcnNlRXJyb3IpIHsKICAgICAgICBl\ncnJvck1lc3NhZ2UgPSAnVW5hYmxlIHRvIHBhcnNlIGVycm9yIG1lc3NhZ2Uu\nIEVudGlyZSBlcnJvciBpczogIicKICAgICAgICAgICAgKyBlcnIudG9TdHJp\nbmcoKSArICciJzsKICAgIH0KICAgIC8vIDQwMyBtZWFucyB1bmF1dGhvcml6\nZWQuCiAgICBpZiAoZXJyLmNvZGUgPT0gNDAzKSB7CiAgICAgICAgZXJyLm1l\nc3NhZ2UgPSAnWW91IG11c3QgaGF2ZSBwdXNoIGFjY2VzcyB0byBydW4gdGhp\ncyBvcGVyYXRpb24gb24gIicKICAgICAgICAgICAgKyBlcnIucmVwbyArICci\nLic7CiAgICB9CiAgICAvLyA0MDQgbWVhbnMgdW5rbm93biByZXBvCiAgICBl\nbHNlIGlmIChlcnIuY29kZSA9PSA0MDQpIHsKICAgICAgICBlcnIubWVzc2Fn\nZSA9ICdVbmtub3duIHJlcG9zaXRvcnk6ICInICsgZXJyLnJlcG8gKyAnIic7\nCiAgICB9CiAgICAvLyA0MTAgbWVhbnMgcmVwbyBoYXMgbm8gR2l0SHViIElz\nc3VlcwogICAgZWxzZSBpZiAoZXJyLmNvZGUgPT0gNDEwKSB7CiAgICAgICAg\nZXJyLm1lc3NhZ2UgPSAnIicgKyBlcnIucmVwbwogICAgICAgICAgICArICci\nIGhhcyBubyBHaXRIdWIgSXNzdWVzIGFzc29jaWF0ZWQgd2l0aCBpdC4nOwog\nICAgfQogICAgLy8gNDIyIG1lYW5zIHZhbGlkYXRpb24gZXJyb3IKICAgIGVs\nc2UgaWYgKGVyci5jb2RlID09IDQyMikgewogICAgICAgIGVyci5tZXNzYWdl\nID0gJ1ZhbGlkYXRpb24gZXJyb3Igb24gIicgKyBlcnIucmVwbyArICciOiAn\nCiAgICAgICAgICAgICsgSlNPTi5zdHJpbmdpZnkoZXJyb3JNZXNzYWdlLmVy\ncm9ycyk7CiAgICB9CiAgICByZXR1cm4gZXJyOwp9CgoKZnVuY3Rpb24gYXR0\nYWNoUmVhZGFibGVFcnJvck1lc3NhZ2VzKGVycnMpIHsKICAgIGlmIChlcnJz\nICYmIGVycnMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIF8ubWFwKGVycnMs\nIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICByZXR1cm4gYXR0YWNoUmVh\nZGFibGVFcnJvck1lc3NhZ2UoZXJyKTsKICAgICAgICB9KTsKICAgIH0KfQoK\nLyoqCiAqIFJlbW92ZXMgZHVwbGljYXRlIGNvbGxhYm9yYXRvcnMuCiAqIEBw\nYXJhbSBjb2xsYWJvcmF0b3JzCiAqIEByZXR1cm5zIHtBcnJheX0KICovCmZ1\nbmN0aW9uIGRlZHVwbGljYXRlQ29sbGFib3JhdG9ycyhjb2xsYWJvcmF0b3Jz\nKSB7CiAgICB2YXIgZm91bmRMb2dpbnMgPSBbXTsKICAgIHJldHVybiBfLmZp\nbHRlcihjb2xsYWJvcmF0b3JzLCBmdW5jdGlvbiAoY29sbGFib3JhdG9yKSB7\nCiAgICAgICAgdmFyIGR1cGxpY2F0ZSA9IGZhbHNlCiAgICAgICAgICAsIGxv\nZ2luID0gY29sbGFib3JhdG9yLmxvZ2luOwogICAgICAgIGlmIChmb3VuZExv\nZ2lucy5pbmRleE9mKGxvZ2luKSA+IC0xKSB7CiAgICAgICAgICAgIGR1cGxp\nY2F0ZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm91\nbmRMb2dpbnMucHVzaChsb2dpbik7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiAhIGR1cGxpY2F0ZTsKICAgIH0pOwp9CgovKioKICogVXNpbmcgcmVnZXgs\nIGZpbmRzIHN1YnRhc2tzIHdpdGhpbiBhIHN1cGVyIGlzc3VlJ3MgYm9keSBz\ndHJpbmcgYW5kIHJldHVybnMKICogdGhlbSBpbiBhbiBhcnJheSBvZiBpc3N1\nZSBudW1iZXJzLiAKICogQHBhcmFtIHN1cGVySXNzdWUKICogQHJldHVybnMg\ne0FycmF5fQogKi8KZnVuY3Rpb24gZXh0cmFjdFN1cGVySXNzdWVTdWJUYXNr\nTnVtYmVycyhzdXBlcklzc3VlKSB7CiAgICB2YXIgbWF0Y2hlcyA9IHN1cGVy\nSXNzdWUuYm9keS5tYXRjaChtYXJrZG93blRhc2tzUmVnZXgpCiAgICAgICwg\nc3ViVGFza0lkcyA9IFtdOwogICAgXy5lYWNoKG1hdGNoZXMsIGZ1bmN0aW9u\nKGxpbmUpIHsKICAgICAgICB2YXIgbWF0Y2ggPSBsaW5lLm1hdGNoKHN1YnRh\nc2tSZWdleCk7CiAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAgIHN1\nYlRhc2tJZHMucHVzaChwYXJzZUludChtYXRjaFszXSkpOwogICAgICAgIH0K\nICAgIH0pOwogICAgcmV0dXJuIHN1YlRhc2tJZHM7Cn0KCi8qKgogKiBUYWtl\ncyBhbiBhcnJheSBvZiBpc3N1ZSBvYmplY3RzIGFuZCBwcmVzZW50cyB0aGVt\nIGRpZmZlcmVudGx5IGRlcGVuZGluZyBvbgogKiAnZm9ybWF0Jy4gVGhlIG9u\nbHkgdmFsaWQgb3B0aW9uIG5vdyBpcyAibmV0d29yayIsIHdoaWNoIGdyb3Vw\ncyBzdXBlciBpc3N1ZQogKiBzdWJ0YXNrcyBpbnRvIGEgInN1YnRhc2tzIiBh\ncnJheSBvbiB0aGUgc3VwZXIgaXNzdWUgb2JqZWN0LgogKiBAcGFyYW0gZm9y\nbWF0IHtzdHJpbmd9ICduZXR3b3JrJyBvciBudWxsCiAqIEBwYXJhbSBpc3N1\nZXMge2FycmF5fQogKiBAcmV0dXJucyB7b2JqZWN0fSB3aXRoICdzdXBlcnMn\nIGFycmF5LCAnc2luZ2xldG9ucycgYXJyYXkgYW5kICdzaXplJyBmb3IKICog\nICAgICAgICAgICAgICAgICAgdG90YWwgbnVtYmVyIG9mIGlzc3VlcyBpbiBh\nbGwuCiAqLwpmdW5jdGlvbiBmb3JtYXRJc3N1ZXMoZm9ybWF0LCBpc3N1ZXMp\nIHsKICAgIHZhciBmb3JtYXR0ZWRJc3N1ZXMKICAgICAgLCBwYXJ0aXRpb24K\nICAgICAgLCBzdXBlcklzc3VlcwogICAgICAsIHNpbmdsZXRvbklzc3Vlcwog\nICAgICAsIHJlbW92ZWRTdWJ0YXNrcyA9IFtdOwogICAgaWYgKGZvcm1hdCA9\nPSAnbmV0d29yaycpIHsKICAgICAgICBmb3JtYXR0ZWRJc3N1ZXMgPSB7CiAg\nICAgICAgICAgIHN1cGVyczogW10KICAgICAgICAgICwgc2luZ2xldG9uczog\nW10KICAgICAgICAgICwgYWxsOiBpc3N1ZXMKICAgICAgICB9OwogICAgICAg\nIHBhcnRpdGlvbiA9IF8ucGFydGl0aW9uKGlzc3VlcywgZnVuY3Rpb24oaXNz\ndWUpIHsKICAgICAgICAgICAgcmV0dXJuIF8uZmluZChpc3N1ZS5sYWJlbHMs\nIGZ1bmN0aW9uKGxhYmVsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbGFi\nZWwubmFtZSA9PSAnc3VwZXInOwogICAgICAgICAgICB9KTsKICAgICAgICB9\nKTsKICAgICAgICBzdXBlcklzc3VlcyA9IHBhcnRpdGlvbi5zaGlmdCgpOwog\nICAgICAgIHNpbmdsZXRvbklzc3VlcyA9IHBhcnRpdGlvbi5zaGlmdCgpOwog\nICAgICAgIF8uZWFjaChzdXBlcklzc3VlcywgZnVuY3Rpb24oc3VwZXJJc3N1\nZSkgewogICAgICAgICAgICB2YXIgc3ViVGFza051bWJlcnMgPSBleHRyYWN0\nU3VwZXJJc3N1ZVN1YlRhc2tOdW1iZXJzKHN1cGVySXNzdWUpOwogICAgICAg\nICAgICBzdXBlcklzc3VlLnN1YnRhc2tzID0gXy5maWx0ZXIoc2luZ2xldG9u\nSXNzdWVzLCBmdW5jdGlvbihpc3N1ZSkgewogICAgICAgICAgICAgICAgdmFy\nIGlzU3VidGFzayA9IF8uY29udGFpbnMoc3ViVGFza051bWJlcnMsIGlzc3Vl\nLm51bWJlcik7CiAgICAgICAgICAgICAgICBpZiAoaXNTdWJ0YXNrKSB7CiAg\nICAgICAgICAgICAgICAgICAgcmVtb3ZlZFN1YnRhc2tzLnB1c2goaXNzdWUu\nbnVtYmVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJl\ndHVybiBpc1N1YnRhc2s7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwog\nICAgICAgIGZvcm1hdHRlZElzc3Vlcy5zdXBlcnMgPSBzdXBlcklzc3VlczsK\nICAgICAgICBfLmVhY2goc2luZ2xldG9uSXNzdWVzLCBmdW5jdGlvbihpc3N1\nZSkgewogICAgICAgICAgICBpZiAoISBfLmNvbnRhaW5zKHJlbW92ZWRTdWJ0\nYXNrcywgaXNzdWUubnVtYmVyKSkgewogICAgICAgICAgICAgICAgZm9ybWF0\ndGVkSXNzdWVzLnNpbmdsZXRvbnMucHVzaChpc3N1ZSk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgZm9ybWF0dGVk\nSXNzdWVzID0gaXNzdWVzOwogICAgfQogICAgcmV0dXJuIGZvcm1hdHRlZElz\nc3VlczsKfQoKLyoqCiAqIEdpdmVuIGEgbGlzdCBvZiBpc3N1ZXMgYW5kIHB1\nbGwgcmVxdWVzdHMsIHBvcHVsYXRlIHRoZSBhZGRpdGlvbmFsIHByb3BlcnRp\nZXMKICogdGhhdCBleGlzdCB3aXRoaW4gYW55IGlzc3VlcyBpbnRvIHRoZSBQ\nUiBvYmplY3RzIHNvIHRoZXkgY29udGFpbiBhcyBtdWNoIGluZm8KICogYXMg\ncG9zc2libGUuCiAqIEBwYXJhbSBpc3N1ZXMge09iamVjdFtdfQogKiBAcGFy\nYW0gcHJzIHtPYmplY3RbXX0KICovCmZ1bmN0aW9uIG1lcmdlSXNzdWVzQW5k\nUHJzKGlzc3VlcywgcHJzKSB7CiAgICBfLmVhY2goaXNzdWVzLCBmdW5jdGlv\nbihpc3N1ZSkgewogICAgICAgIHZhciB0YXJnZXRQcgogICAgICAgICAgLCB0\nYXJnZXRQckluZGV4ID0gXy5maW5kSW5kZXgocHJzLCBmdW5jdGlvbihwcikg\newogICAgICAgICAgICAgIHJldHVybiBwciAmJiBwci5udW1iZXIgPT0gaXNz\ndWUubnVtYmVyOwogICAgICAgICAgfSk7CiAgICAgICAgaWYgKHRhcmdldFBy\nSW5kZXggPiAtMSkgewogICAgICAgICAgICB0YXJnZXRQciA9IHByc1t0YXJn\nZXRQckluZGV4XTsKICAgICAgICAgICAgcHJzW3RhcmdldFBySW5kZXhdID0g\nXy5tZXJnZSh0YXJnZXRQciwgaXNzdWUpOwogICAgICAgIH0KICAgIH0pOwog\nICAgcmV0dXJuIHByczsKfQoKLyoqCiAqIFdyYXBwZXIgY2xhc3MgYXJvdW5k\nIHRoZSBHaXRIdWIgQVBJIGNsaWVudCwgcHJvdmlkaW5nIHNvbWUgYXV0aGVu\ndGljYXRpb24KICogY29udmVuaWVuY2UgYW5kIGFkZGl0aW9uYWwgdXRpbGl0\neSBmdW5jdGlvbnMgZm9yIGV4ZWN1dGluZyBvcGVyYXRpb25zIGFjcm9zcwog\nKiB0aGUgaXNzdWUgdHJhY2tlcnMgb2Ygc2V2ZXJhbCByZXBvc2l0b3JpZXMg\nYXQgb25jZS4KICogQHBhcmFtIHVzZXJuYW1lIHtzdHJpbmd9IEdpdEh1YiB1\nc2VybmFtZSBjcmVkZW50aWFsIGZvciBhdXRoZW50aWNhdGlvbi4KICogQHBh\ncmFtIHBhc3N3b3JkIHtzdHJpbmd9IEdpdEh1YiBwYXNzd29yZCBjcmVkZW50\naWFsIGZvciBhdXRoZW50aWNhdGlvbi4KICogQHBhcmFtIHJlcG9TbHVncyB7\nc3RyaW5nW119IExpc3Qgb2YgcmVwb3NpdG9yeSBzbHVnIHN0cmluZ3MgdG8g\nb3BlcmF0ZSB1cG9uLgogKiBAcGFyYW0gY2FjaGUge2ludH0gSG93IG1hbnkg\nc2Vjb25kcyB0byBjYWNoZSBmZXRjaGVkIHJlc3VsdHMuIERlZmF1bHQgaXMg\nMC4KICovCmZ1bmN0aW9uIFNwcmludGVyKHVzZXJuYW1lLCBwYXNzd29yZCwg\ncmVwb1NsdWdzLCBjYWNoZSkgewogICAgaWYgKCEgdXNlcm5hbWUpIHsKICAg\nICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdXNlcm5hbWUuJyk7CiAg\nICB9CiAgICBpZiAoISBwYXNzd29yZCkgewogICAgICAgIHRocm93IG5ldyBF\ncnJvcignTWlzc2luZyBwYXNzd29yZC4nKTsKICAgIH0KICAgIGlmICghIHJl\ncG9TbHVncykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBy\nZXBvc2l0b3JpZXMuJyk7CiAgICB9CiAgICB0aGlzLnVzZXJuYW1lID0gdXNl\ncm5hbWU7CiAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7CiAgICAvLyBW\nZXJpZnkgcmVxdWlyZWQgY29uZmlndXJhdGlvbiBlbGVtZW50cy4KICAgIHRo\naXMucmVwb3MgPSBjb252ZXJ0U2x1Z3NUb09iamVjdHMocmVwb1NsdWdzKTsK\nICAgIHRoaXMuZ2ggPSBuZXcgR2l0SHViQXBpKHsKICAgICAgICB2ZXJzaW9u\nOiAnMy4wLjAnCiAgICAgICwgdGltZW91dDogNTAwMAogICAgfSk7CiAgICB0\naGlzLmdoLmF1dGhlbnRpY2F0ZSh7CiAgICAgICAgdHlwZTogJ2Jhc2ljJwog\nICAgICAsIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lCiAgICAgICwgcGFzc3dv\ncmQ6IHRoaXMucGFzc3dvcmQKICAgIH0pOwogICAgdGhpcy5fQ0FDSEUgPSB7\nfTsKICAgIHRoaXMuc2V0Q2FjaGVEdXJhdGlvbihjYWNoZSk7CiAgICB0aGlz\nLl9zZXR1cENhY2hpbmcoKTsKfQoKU3ByaW50ZXIucHJvdG90eXBlLl9jYWNo\nZUlzVmFsaWQgPSBmdW5jdGlvbihjYWNoZUtleSkgewogICAgdmFyIGNhY2hl\nID0gdGhpcy5fQ0FDSEVbY2FjaGVLZXldOwogICAgaWYgKCEgY2FjaGUpIHsK\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gKG5ldyBE\nYXRlKCkuZ2V0VGltZSgpIDwgY2FjaGUudGltZSArIHRoaXMuX2NhY2hlRHVy\nYXRpb24gKiAxMDAwKTsKfTsKCgovKioKICogV3JhcHMgY2FsbHMgdG8gZ2V0\nKiBmdW5jdGlvbnMgd2l0aCBhIGZ1bmN0aW9uIHRoYXQgY2FjaGVzIHJlc3Vs\ndHMuCiAqLwpTcHJpbnRlci5wcm90b3R5cGUuX3NldHVwQ2FjaGluZyA9IGZ1\nbmN0aW9uKCkgewogICAgdmFyIGNhY2hlRHVyYXRpb24gPSB0aGlzLl9jYWNo\nZUR1cmF0aW9uCiAgICAgICwgbWUgPSB0aGlzOwogICAgXy5lYWNoKG9yaWdp\nbmFsUHJvdG90eXBlRnVuY3Rpb25zLCBmdW5jdGlvbihmbiwgbmFtZSkgewog\nICAgICAgIGlmIChuYW1lLmluZGV4T2YoJ2dldCcpID09IDApIHsKICAgICAg\nICAgICAgLy8gY29uc29sZS5sb2coJ3dyYXBwaW5nICVzJywgbmFtZSk7CiAg\nICAgICAgICAgIG1lW25hbWVdID0gZnVuY3Rpb24oKSB7CgogICAgICAgICAg\nICAgICAgLy8gRGVmYXVsdCBjYWNoZSBrZXkgaXMgZnVuY3Rpb24gbmFtZS4K\nICAgICAgICAgICAgICAgIHZhciBjYWNoZUtleSA9IG5hbWUKICAgICAgICAg\nICAgICAgICAgLCBjYWxsYmFjawogICAgICAgICAgICAgICAgICAsIG5ld0Fy\nZ3VtZW50cyA9IFtdOwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlc3Vs\ndENhY2hlcihlcnIsIHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIC8v\nIERvbid0IGNhY2hlIGlmIGR1cmF0aW9uIGlzIDAuCiAgICAgICAgICAgICAg\nICAgICAgaWYgKG1lLl9jYWNoZUR1cmF0aW9uKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIC8vY29uc29sZS5sb2coJ2NhY2hpbmcgcmVzcG9uc2UgZm9y\nICVzJywgY2FjaGVLZXkpOwogICAgICAgICAgICAgICAgICAgICAgICBtZS5f\nQ0FDSEVbY2FjaGVLZXldID0gewogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgdGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgICAgICAgICAg\nICAgICAgICAgICAsIHJlc3VsdDogcmVzdWx0CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgLCBlcnJvcnM6IGVycgogICAgICAgICAgICAgICAgICAgICAg\nICB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg\nICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7CiAgICAgICAgICAgICAgICB9Cgog\nICAgICAgICAgICAgICAgLy8gSWYgZnVuY3Rpb24gd2FzIHBhc3NlZCBhIGZp\nbHRlciBvYmplY3QsIHdlIG11c3QgdXBkYXRlIHRoZSAKICAgICAgICAgICAg\nICAgIC8vIGNhY2hlIGtleSB0byBpbmNsdWRlIHNwZWNpZmljIGZpbHRlcnMu\nCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGFyZ3VtZW50c1swXSkgPT0g\nJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgICBjYWNoZUtleSA9IG5h\nbWUgKyBKU09OLnN0cmluZ2lmeShhcmd1bWVudHNbMF0pOwogICAgICAgICAg\nICAgICAgICAgIC8vIDJuZCBwYXJhbWV0ZXIgd2lsbCBiZSBhIGNhbGxiYWNr\nIGlmIHRoZSBmaXJzdCB3YXMgYQogICAgICAgICAgICAgICAgICAgIC8vIGZp\nbHRlci4KICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50\nc1sxXTsKICAgICAgICAgICAgICAgICAgICBuZXdBcmd1bWVudHMgPSBbYXJn\ndW1lbnRzWzBdLCByZXN1bHRDYWNoZXJdCiAgICAgICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgICAgIC8vIDFzdCBwYXJhbWV0ZXIgaXMg\nYSBjYWxsYmFjayBpZiB0aGVyZSB3YXMgbm8gZmlsdGVyLgogICAgICAgICAg\nICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzBdOwogICAgICAgICAg\nICAgICAgICAgIG5ld0FyZ3VtZW50cyA9IFtyZXN1bHRDYWNoZXJdCiAgICAg\nICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gSWYgcmVzdWx0IGhh\ncyBhbHJlYWR5IGJlZW4gY2FjaGVkLCB1c2UgaXQuCiAgICAgICAgICAgICAg\nICBpZiAobWUuX2NhY2hlSXNWYWxpZChjYWNoZUtleSwgY2FjaGVEdXJhdGlv\nbikpIHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndXNp\nbmcgY2FjaGUgZm9yICVzJywgY2FjaGVLZXkpOwogICAgICAgICAgICAgICAg\nICAgIGNhbGxiYWNrKAogICAgICAgICAgICAgICAgICAgICAgICBtZS5fQ0FD\nSEVbY2FjaGVLZXldLmVycm9ycywgbWUuX0NBQ0hFW2NhY2hlS2V5XS5yZXN1\nbHQKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2tp\ncHBpbmcgY2FjaGUgZm9yICVzJywgY2FjaGVLZXkpOwogICAgICAgICAgICAg\nICAgICAgIGZuLmFwcGx5KG1lLCBuZXdBcmd1bWVudHMpOwogICAgICAgICAg\nICAgICAgfQoKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICB9KTsKfTsK\nClNwcmludGVyLnByb3RvdHlwZS5fZWFjaFJlcG8gPSBmdW5jdGlvbihmbiwg\nbWFpbkNhbGxiYWNrKSB7CiAgICB2YXIgYXN5bmNFcnJvcnMgPSBbXQogICAg\nICAsIGZ1bmNzID0gdGhpcy5yZXBvcy5tYXAoZnVuY3Rpb24ocmVwb1NsdWcp\nIHsKICAgICAgICAgICAgdmFyIG9yZyA9IHJlcG9TbHVnWzBdCiAgICAgICAg\nICAgICAgLCByZXBvID0gcmVwb1NsdWdbMV0KICAgICAgICAgICAgICAsIHNs\ndWcgPSBvcmcgKyAnLycgKyByZXBvOwogICAgICAgICAgICByZXR1cm4gZnVu\nY3Rpb24oY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIGZuKG9yZywgcmVw\nbywgZnVuY3Rpb24oZXJyb3IsIGRhdGEpIHsKICAgICAgICAgICAgICAgICAg\nICAvLyBBbGwgZXJyb3JzIG11c3QgaGF2ZSBhICJyZXBvIiBwcm9wZXJ0eSB0\nbyBpZGVudGlmeQogICAgICAgICAgICAgICAgICAgIC8vIHdoZXJlIHRoZXkg\nY2FtZSBmcm9tLgogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFJl\ncG9Ub0Vycm9yKGVycikgewogICAgICAgICAgICAgICAgICAgICAgICBlcnIu\ncmVwbyA9IHNsdWc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBl\ncnI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAg\nIGlmIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXBl\nbmRpbmcgb24gd2hpY2ggQVBJIGZ1bmN0aW9uIGdldHMgY2FsbGVkLCB0aGlz\nCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIG9iamVjdCBjb3Vs\nZCBiZSBhbiBBcnJheSBvciBqdXN0IG9uZSBFcnJvcgogICAgICAgICAgICAg\nICAgICAgICAgICAvLyBvYmplY3QsIHNvIHdlJ2xsIGhhdmUgdG8gZGVhbCB3\naXRoIGJvdGguCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5s\nZW5ndGggIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgYXN5bmNFcnJvcnMgPSBhc3luY0Vycm9ycy5jb25jYXQoCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGVycm9yLCBhZGRS\nZXBvVG9FcnJvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBhc3luY0Vycm9ycy5wdXNoKGFkZFJlcG9Ub0Vycm9y\nKGVycm9yKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVs\nbCwgZGF0YSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsK\nICAgICAgICB9KTsKICAgIGFzeW5jLnBhcmFsbGVsKGZ1bmNzLCBmdW5jdGlv\nbihlcnIsIGRhdGEpIHsKICAgICAgICAvLyBPdmVycmlkZXMgdGhlIGRlZmF1\nbHQgYXN5bmMgYmVoYXZpb3Igb2Ygc3RvcHBpbmcgb24gZXJyb3JzIGJ5CiAg\nICAgICAgLy8gY29sbGVjdGluZyB0aGVtIGhlcmUsIGNvbnZlcnRpbmcgdGhl\nbSBpbnRvIHJlYWRhYmxlIG1lc3NhZ2VzLCBhbmQKICAgICAgICAvLyBwYXNz\naW5nIHRoZW0gYWxsIGJhY2sgdG8gdGhlIG1haW4gY2FsbGJhY2suIFRoZSAi\nZGF0YSIgYXJyYXkgbWlnaHQKICAgICAgICAvLyBoYXZlIG51bGwgdmFsdWVz\nLCB3aGljaCB1c3VhbGx5IGhhcHBlbnMgaWYgdGhlcmUgaXMgYW4gZXJyb3Is\nIHNvIHdlCiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGZpbHRlciBvdXQgdGhl\nIG51bGxzLgogICAgICAgIG1haW5DYWxsYmFjaygKICAgICAgICAgICAgYXR0\nYWNoUmVhZGFibGVFcnJvck1lc3NhZ2VzKGFzeW5jRXJyb3JzKQogICAgICAg\nICAgLCBfLmZpbHRlcihkYXRhLCBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAg\nICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgICAgfSkKICAgICAgICAp\nOwogICAgfSk7Cn07CgpTcHJpbnRlci5wcm90b3R5cGUuX2VhY2hSZXBvRmxh\ndHRlbmVkID0gZnVuY3Rpb24oZm4sIG1haW5DYWxsYmFjaykgewogICAgdGhp\ncy5fZWFjaFJlcG8oZm4sIGZ1bmN0aW9uKGVyciwgZGF0YSkgewogICAgICAg\nIG1haW5DYWxsYmFjayhlcnIsIF8uZmxhdHRlbihkYXRhKSk7CiAgICB9KTsK\nfTsKClNwcmludGVyLnByb3RvdHlwZS5fZmV0Y2hBbGxQYWdlcyA9IGZ1bmN0\naW9uKGZldGNoRnVuY3Rpb24sIHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHZh\nciBjbGllbnQgPSB0aGlzLmdoCiAgICAgICwgYWxsUGFnZXMgPSBbXQogICAg\nICAsIHNsdWcgPSBwYXJhbXMudXNlciArICcvJyArIHBhcmFtcy5yZXBvOwog\nICAgZnVuY3Rpb24gZ2V0UmVtYWluaW5nUGFnZXMobGFzdFBhZ2UsIHBhZ2VD\nYWxsYmFjaykgewogICAgICAgIGFsbFBhZ2VzID0gYWxsUGFnZXMuY29uY2F0\nKGxhc3RQYWdlKTsKICAgICAgICBpZiAoY2xpZW50Lmhhc05leHRQYWdlKGxh\nc3RQYWdlKSkgewogICAgICAgICAgICBjbGllbnQuZ2V0TmV4dFBhZ2UobGFz\ndFBhZ2UsIGZ1bmN0aW9uKGVyciwgcGFnZVJlc3VsdHMpIHsKICAgICAgICAg\nICAgICAgIGdldFJlbWFpbmluZ1BhZ2VzKHBhZ2VSZXN1bHRzLCBwYWdlQ2Fs\nbGJhY2spOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAvLyBBdHRhY2ggYSByZXBvIG9iamVjdCB0byBlYWNoIHJlc3Vs\ndCBzbyB1c2VycyBjYW4gdGVsbCB3aGF0IHJlcG8KICAgICAgICAgICAgLy8g\naXQgaXMgY29taW5nIGZyb20uCiAgICAgICAgICAgIF8uZWFjaChhbGxQYWdl\ncywgZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgaWYgKGl0ZW0p\nIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLnJlcG8gPSBzbHVnOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcGFn\nZUNhbGxiYWNrKG51bGwsIGFsbFBhZ2VzKTsKICAgICAgICB9CiAgICB9CiAg\nICBmZXRjaEZ1bmN0aW9uKHBhcmFtcywgZnVuY3Rpb24oZXJyLCBwYWdlT25l\nUmVzdWx0cykgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgY2Fs\nbGJhY2soZXJyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBnZXRS\nZW1haW5pbmdQYWdlcyhwYWdlT25lUmVzdWx0cywgY2FsbGJhY2spOwogICAg\nICAgIH0KICAgIH0pOwp9OwoKLyoqCiAqIEFsbG93cyB1c2VycyB0byByZXNl\ndCBjYWNoZSBkdXJhdGlvbiBvbiBhIHNwcmludGVyIGluc3RhbmNlLgogKiBA\ncGFyYW0gZHVyYXRpb24ge2ludH0gc2Vjb25kcyB0byBjYWNoZSByZXN1bHRz\nLgogKi8KU3ByaW50ZXIucHJvdG90eXBlLnNldENhY2hlRHVyYXRpb24gPSBm\ndW5jdGlvbihkdXJhdGlvbikgewogICAgLy8gY29uc29sZS5sb2coJ3NldHRp\nbmcgY2FjaGUgZHVyYXRpb24gdG8gJXMnLCBkdXJhdGlvbik7CiAgICB0aGlz\nLl9jYWNoZUR1cmF0aW9uID0gZHVyYXRpb247Cn07CgovKioKICogQ2xlYXJz\nIHRoZSBjYWNoZS4KICovClNwcmludGVyLnByb3RvdHlwZS5jbGVhckNhY2hl\nID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9DQUNIRSA9IHt9Owp9OwoKLyoK\nICogSXNzdWVzIGFuZCBQUnMgYXJlIGFsbW9zdCB0aGUgc2FtZSB0aGluZyBp\nbiBHaXRIdWIncyBBUEksIHNvIHRoaXMgaXMganVzdAogKiBhIGNvbnZlbmll\nbmNlIG1ldGhvZCB0byBwdXQgYWxsIHRoZSBsb2dpYyBpbiBvbmUgcGxhY2Uu\nCiAqLwpTcHJpbnRlci5wcm90b3R5cGUuX2dldElzc3VlT3JQciA9IGZ1bmN0\naW9uKHR5cGUsIHVzZXJGaWx0ZXJzLCBtYWluQ2FsbGJhY2spIHsKICAgIHZh\nciBtZSA9IHRoaXMKICAgICAgLCBkZWZhdWx0RmlsdGVycyA9IHtzdGF0ZTog\nJ29wZW4nfQogICAgICAsIGZpbHRlcnMKICAgICAgLCBmaWx0ZXJPcmcKICAg\nICAgLCBmaWx0ZXJSZXBvCiAgICAgICwgbWlsZXN0b25lCiAgICAgICwgZmV0\nY2hlcgogICAgICAsIHJlc3VsdEhhbmRsZXIKICAgICAgLCBnZXR0ZXI7Cgog\nICAgaWYgKHR5cGUgPT0gJ2lzc3VlJykgewogICAgICAgIGdldHRlciA9IHRo\naXMuZ2guaXNzdWVzLnJlcG9Jc3N1ZXM7CiAgICB9IGVsc2UgewogICAgICAg\nIGdldHRlciA9IHRoaXMuZ2gucHVsbFJlcXVlc3RzLmdldEFsbAogICAgfQoK\nICAgIGlmICh0eXBlb2YodXNlckZpbHRlcnMpID09ICdmdW5jdGlvbicgJiYg\nbWFpbkNhbGxiYWNrID09IHVuZGVmaW5lZCkgewogICAgICAgIG1haW5DYWxs\nYmFjayA9IHVzZXJGaWx0ZXJzOwogICAgICAgIHVzZXJGaWx0ZXJzID0ge307\nCiAgICB9CiAgICBmaWx0ZXJzID0gXy5leHRlbmQoZGVmYXVsdEZpbHRlcnMs\nIHVzZXJGaWx0ZXJzKTsKICAgIGlmIChmaWx0ZXJzLm1pbGVzdG9uZSkgewog\nICAgICAgIG1pbGVzdG9uZSA9IGZpbHRlcnMubWlsZXN0b25lOwogICAgICAg\nIGRlbGV0ZSBmaWx0ZXJzLm1pbGVzdG9uZTsKICAgIH0KICAgIGZldGNoZXIg\nPSBmdW5jdGlvbihvcmcsIHJlcG8sIGxvY2FsQ2FsbGJhY2spIHsKICAgICAg\nICB2YXIgZmV0Y2hCeVN0YXRlID0ge30KICAgICAgICAgICwgYXN5bmNFcnJv\ncnMgPSBbXQogICAgICAgICAgLCBsb2NhbEZpbHRlcnMgPSBfLmNsb25lKGZp\nbHRlcnMpOwogICAgICAgIGxvY2FsRmlsdGVycy51c2VyID0gb3JnOwogICAg\nICAgIGxvY2FsRmlsdGVycy5yZXBvID0gcmVwbzsKCiAgICAgICAgLy8gVGhp\ncyBleGlzdHMgc28gd2UgY2FuIHBvcHVsYXRlIGFuIGVycm9ycyBvYmplY3Qg\nZnJvbSB0aGUgYXN5bmMgY2FsbHMuCiAgICAgICAgLy8gT3RoZXJ3aXNlIGlm\nIHRoZXJlIGlzIGFuIGVycm9yIHBhc3NlZCB0byB0aGUgYXN5bmMgY2FsbGJh\nY2ssIHRoZQogICAgICAgIC8vIGFzeW5jIG1vZHVsZSB3aWxsIHN0b3AgZXhl\nY3V0aW5nIHJlbWFpbmluZyBmdW5jdGlvbnMuCiAgICAgICAgZnVuY3Rpb24g\nZ2V0RmV0Y2hCeVN0YXRlQ2FsbGJhY2soY2FsbGJhY2spIHsKICAgICAgICAg\nICAgcmV0dXJuIGZ1bmN0aW9uKGVyciwgZGF0YSkgewogICAgICAgICAgICAg\nICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgIGFzeW5jRXJyb3Jz\nLnB1c2goZXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIGNhbGxiYWNrKG51bGwsIGRhdGEpOwogICAgICAgICAgICB9OwogICAgICAg\nIH0KCiAgICAgICAgLy8gVGhpcyBsb2dpYyBpcyB0byBhbGxvdyBmb3IgYSBz\ndGF0ZSBvdGhlciB0aGFuICdvcGVuJyBhbmQgJ2Nsb3NlZCcuCiAgICAgICAg\nLy8gVGhlICdhbGwnIHN0YXRlIHNob3VsZCByZXR1cm4gYm90aCBvcGVuIGFu\nZCBjbG9zZWQgaXNzdWVzLCB3aGljaCB3aWxsCiAgICAgICAgLy8gcmVxdWly\nZSBhc3luYyBjYWxscyB0byB0byB0aGUgQVBJIHRvIGdldCBpc3N1ZXMgd2l0\naCBlYWNoIHN0YXRlLgogICAgICAgIGlmIChsb2NhbEZpbHRlcnMuc3RhdGUg\nJiYgbG9jYWxGaWx0ZXJzLnN0YXRlID09ICdhbGwnKSB7CiAgICAgICAgICAg\nIHZhciBvcGVuU3RhdGVGaWx0ZXIgPSBfLmNsb25lKGxvY2FsRmlsdGVycykK\nICAgICAgICAgICAgICAsIGNsb3NlZFN0YXRlRmlsdGVyID0gXy5jbG9uZShs\nb2NhbEZpbHRlcnMpOwogICAgICAgICAgICBvcGVuU3RhdGVGaWx0ZXIuc3Rh\ndGUgPSAnb3Blbic7CiAgICAgICAgICAgIGNsb3NlZFN0YXRlRmlsdGVyLnN0\nYXRlID0gJ2Nsb3NlZCc7CiAgICAgICAgICAgIGZldGNoQnlTdGF0ZVtvcGVu\nU3RhdGVGaWx0ZXIuc3RhdGVdID0gZnVuY3Rpb24oZmV0Y2hDYWxsYmFjaykg\newogICAgICAgICAgICAgICAgbWUuX2ZldGNoQWxsUGFnZXMoCiAgICAgICAg\nICAgICAgICAgICAgZ2V0dGVyCiAgICAgICAgICAgICAgICAgICwgb3BlblN0\nYXRlRmlsdGVyCiAgICAgICAgICAgICAgICAgICwgZ2V0RmV0Y2hCeVN0YXRl\nQ2FsbGJhY2soZmV0Y2hDYWxsYmFjaykKICAgICAgICAgICAgICAgICk7CiAg\nICAgICAgICAgIH07CiAgICAgICAgICAgIGZldGNoQnlTdGF0ZVtjbG9zZWRT\ndGF0ZUZpbHRlci5zdGF0ZV0gPSBmdW5jdGlvbihmZXRjaENhbGxiYWNrKSB7\nCiAgICAgICAgICAgICAgICBtZS5fZmV0Y2hBbGxQYWdlcygKICAgICAgICAg\nICAgICAgICAgICBnZXR0ZXIKICAgICAgICAgICAgICAgICAgLCBjbG9zZWRT\ndGF0ZUZpbHRlcgogICAgICAgICAgICAgICAgICAsIGdldEZldGNoQnlTdGF0\nZUNhbGxiYWNrKGZldGNoQ2FsbGJhY2spCiAgICAgICAgICAgICAgICApOwog\nICAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZl\ndGNoQnlTdGF0ZVtsb2NhbEZpbHRlcnMuc3RhdGVdID0gZnVuY3Rpb24oZmV0\nY2hDYWxsYmFjaykgewogICAgICAgICAgICAgICAgbWUuX2ZldGNoQWxsUGFn\nZXMoCiAgICAgICAgICAgICAgICAgICAgZ2V0dGVyCiAgICAgICAgICAgICAg\nICAgICwgbG9jYWxGaWx0ZXJzCiAgICAgICAgICAgICAgICAgICwgZ2V0RmV0\nY2hCeVN0YXRlQ2FsbGJhY2soZmV0Y2hDYWxsYmFjaykKICAgICAgICAgICAg\nICAgICk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGFzeW5j\nLnBhcmFsbGVsKGZldGNoQnlTdGF0ZSwgZnVuY3Rpb24oZXJyLCBhbGxJc3N1\nZXMpIHsKICAgICAgICAgICAgLy8gSWYgdGhlcmUgd2VyZSBubyBhc3luYyBl\ncnJvcnMsIHdlJ2xsIHVzZSB1bmRlZmluZWQgaW5zdGVhZCBvZiBhbgogICAg\nICAgICAgICAvLyBlbXB0eSBhcnJheSB0byByZXByZXNlbnQgbm8gZXJyb3Jz\nLgogICAgICAgICAgICBpZiAoYXN5bmNFcnJvcnMubGVuZ3RoID09IDApIHsK\nICAgICAgICAgICAgICAgIGFzeW5jRXJyb3JzID0gdW5kZWZpbmVkOwogICAg\nICAgICAgICB9CiAgICAgICAgICAgIC8vIElmIHN0YXRlIGlzICdhbGwnLCB3\nZSBuZWVkIHRvIGNvbmNhdCB0aGUgb3BlbiBhbmQgY2xvc2VkIGlzc3Vlcwog\nICAgICAgICAgICAvLyB0b2dldGhlci4KICAgICAgICAgICAgaWYgKGxvY2Fs\nRmlsdGVycy5zdGF0ZSAmJiBsb2NhbEZpbHRlcnMuc3RhdGUgPT0gJ2FsbCcp\nIHsKICAgICAgICAgICAgICAgIGFsbElzc3VlcyA9IGFsbElzc3Vlcy5vcGVu\nLmNvbmNhdChhbGxJc3N1ZXMuY2xvc2VkKTsKICAgICAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgICAgIGFsbElzc3VlcyA9IGFsbElzc3Vlc1tsb2Nh\nbEZpbHRlcnMuc3RhdGVdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxv\nY2FsQ2FsbGJhY2soYXN5bmNFcnJvcnMsIGFsbElzc3VlcykKICAgICAgICB9\nKTsKICAgIH07CgogICAgcmVzdWx0SGFuZGxlciA9IGZ1bmN0aW9uKGVycm9y\ncywgcmVzdWx0KSB7CiAgICAgICAgaWYgKG1pbGVzdG9uZSkgewogICAgICAg\nICAgICByZXN1bHQgPSBfLmZpbHRlcihyZXN1bHQsIGZ1bmN0aW9uKGlzc3Vl\nKSB7CiAgICAgICAgICAgICAgICBpZiAoaXNzdWUubWlsZXN0b25lID09IG51\nbGwpIHsgcmV0dXJuIGZhbHNlOyB9CiAgICAgICAgICAgICAgICByZXR1cm4g\naXNzdWUubWlsZXN0b25lLnRpdGxlID09IG1pbGVzdG9uZTsKICAgICAgICAg\nICAgfSk7CiAgICAgICAgfQogICAgICAgIC8vIElmIHVzZXIgc3BlY2lmaWVk\nIGEgcmVzdWx0IGZvcm1hdCwgYXBwbHkgaXQuCiAgICAgICAgaWYgKHVzZXJG\naWx0ZXJzLmZvcm1hdCkgewogICAgICAgICAgICByZXN1bHQgPSBmb3JtYXRJ\nc3N1ZXModXNlckZpbHRlcnMuZm9ybWF0LCByZXN1bHQpOwogICAgICAgIH0K\nICAgICAgICBtYWluQ2FsbGJhY2soZXJyb3JzLCBzb3J0SXNzdWVzKHJlc3Vs\ndCkpOwogICAgfTsKCiAgICAvLyBJZiB0aGUgdXNlciBzcGVjaWZpZWQgb25s\neSBvbmUgcmVwb3NpdG9yeSB0byBxdWVyeSwgd2UgZG9uJ3Qgd2FudCB0bwog\nICAgLy8gcXVlcnkgYWxsIHRoZSBvdGhlcnMuCiAgICBpZiAoZmlsdGVycy5y\nZXBvKSB7CiAgICAgICAgZmlsdGVyT3JnID0gZmlsdGVycy5yZXBvLnNwbGl0\nKCcvJykuc2hpZnQoKTsKICAgICAgICBmaWx0ZXJSZXBvID0gZmlsdGVycy5y\nZXBvLnNwbGl0KCcvJykucG9wKCk7CiAgICAgICAgZmV0Y2hlcihmaWx0ZXJP\ncmcsIGZpbHRlclJlcG8sIHJlc3VsdEhhbmRsZXIpOwogICAgfSBlbHNlIHsK\nICAgICAgICB0aGlzLl9lYWNoUmVwb0ZsYXR0ZW5lZChmZXRjaGVyLCByZXN1\nbHRIYW5kbGVyKTsKICAgIH0KfTsKCi8qKgogKiBSZXR1cm5zIGFsbCBpc3N1\nZXMgYWNyb3NzIGFsbCBtb25pdG9yZWQgcmVwb3MuIE9wdGlvbmFsIGZpbHRl\ncnMgY2FuIGJlCiAqIHByb3ZpZGVkIHRvIGZpbHRlciByZXN1bHRzLgogKiBA\ncGFyYW0gW3VzZXJGaWx0ZXJzXSB7b2JqZWN0fSBGaWx0ZXIsIGxpa2Uge3N0\nYXRlOiAnY2xvc2VkJ30uIFRoaXMgY2FuIGFsc28KICogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgY29udGFpbiBhICdmb3JtYXQnIHZhbHVlIHRv\nIHNwZWNpZnkgaG93IHRoZQogKiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBpc3N1ZXMgc2hvdWxkIGJlIHByZXNlbnRlZC4gVGhlIG9ubHkgdmFs\naWQKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uIGF0\nIHRoaXMgcG9pbnQgaXMgJ25ldHdvcmsnLCB3aGljaCB3aWxsCiAqICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIG91dCAic3VwZXIiIGlz\nc3VlcyBhbmQgInNpbmdsZXRvbiIgaXNzdWVzCiAqICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGFuZCBhdHRhY2hpbmcgc3VwZXIgaXNzdWUgc3Vi\ndGFza3MgYXMKICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInN1\nYnRhc2tzIiBvbiB0aGUgc3VwZXIgaXNzdWUgb2JqZWN0LgogKiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAoQSBiaXQgb2YgYW4gdW5hZHZlcnRp\nc2VkIGZlYXR1cmUgb2Ygc3ByaW50ZXIuKQogKiBAcGFyYW0gbWFpbkNhbGxi\nYWNrIHtmdW5jdGlvbn0gQ2FsbGVkIHdpdGggZXJyLCBpc3N1ZXMgd2hlbiBk\nb25lLiBJc3N1ZXMgYXJlCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBzb3J0ZWQgYnkgdXBkYXRlZF9hdC4KICovClNwcmludGVyLnByb3Rv\ndHlwZS5nZXRJc3N1ZXMgPSBmdW5jdGlvbih1c2VyRmlsdGVycywgbWFpbkNh\nbGxiYWNrKSB7CiAgICB0aGlzLl9nZXRJc3N1ZU9yUHIoJ2lzc3VlJywgdXNl\nckZpbHRlcnMsIG1haW5DYWxsYmFjayk7Cn07CgovKioKICogUmV0dXJucyBh\nbGwgcHJzIGFjcm9zcyBhbGwgbW9uaXRvcmVkIHJlcG9zLiBPcHRpb25hbCBm\naWx0ZXJzIGNhbiBiZSBwcm92aWRlZAogKiB0byBmaWx0ZXIgcmVzdWx0cywg\nYnV0IHRoZXkgYXJlIG1vcmUgbGltaXRlZCB0aGFuIGdldHRpbmcgaXNzdWVz\nLgogKiBAcGFyYW0gW3VzZXJGaWx0ZXJzXSB7b2JqZWN0fSBGaWx0ZXIsIGxp\na2Uge3N0YXRlOiAnY2xvc2VkJ30uIE9uZSBhZGRpdGlvbmFsCiAqICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5IHlvdSBjYW4gdXNl\nIHRvIGdldCB0aGUgbW9zdCBkYXRhIGFzCiAqICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIHBvc3NpYmxlIGZvciBlYWNoIFBSIGlzICdtZXJnZUlz\nc3VlUHJvcGVydGllcycuCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIFdoZW4gZ2l2ZW4sIHRoaXMgd2lsbCBhbHNvIGdldCBhbGwgaXNzdWVz\nIGFuZAogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZSB0\naGVtIGludG8gdGhlIFBSIG9iamVjdHMgdG8gcHJvdmlkZSB0aGUKICogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9zdCBkYXRhIGFzIHBvc3Np\nYmxlLgogKiBAcGFyYW0gbWFpbkNhbGxiYWNrIHtmdW5jdGlvbn0gQ2FsbGVk\nIHdpdGggZXJyLCBwcnMgd2hlbiBkb25lLiBQUnMgYXJlCiAqICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWQgYnkgdXBkYXRlZF9hdC4K\nICovClNwcmludGVyLnByb3RvdHlwZS5nZXRQdWxsUmVxdWVzdHMgPSBmdW5j\ndGlvbih1c2VyRmlsdGVycywgbWFpbkNhbGxiYWNrKSB7CiAgICB2YXIgbWUg\nPSB0aGlzCiAgICAgICwgZmV0Y2hlcnMgPSB7fTsKICAgIGlmICh0eXBlb2Yo\ndXNlckZpbHRlcnMpID09ICdmdW5jdGlvbicgJiYgbWFpbkNhbGxiYWNrID09\nIHVuZGVmaW5lZCkgewogICAgICAgIG1haW5DYWxsYmFjayA9IHVzZXJGaWx0\nZXJzOwogICAgICAgIHVzZXJGaWx0ZXJzID0ge307CiAgICB9CiAgICBmZXRj\naGVycy5wcnMgPSBmdW5jdGlvbihsb2NhbENhbGxiYWNrKSB7CiAgICAgICAg\nbWUuX2dldElzc3VlT3JQcigncHInLCB1c2VyRmlsdGVycywgbG9jYWxDYWxs\nYmFjayk7CiAgICB9OwogICAgLy8gSWYgd2UgbmVlZCB0byBnZXQgaXNzdWVz\nIGFzIHdlbGwsIHdlIGFkZCBhbm90aGVyIGZldGNoZXIgZnVuY3Rpb24uCiAg\nICBpZiAodXNlckZpbHRlcnMubWVyZ2VJc3N1ZVByb3BlcnRpZXMpIHsKICAg\nICAgICBmZXRjaGVycy5pc3N1ZXMgPSBmdW5jdGlvbihsb2NhbENhbGxiYWNr\nKSB7CiAgICAgICAgICAgIG1lLl9nZXRJc3N1ZU9yUHIoJ2lzc3VlJywgdXNl\nckZpbHRlcnMsIGxvY2FsQ2FsbGJhY2spOwogICAgICAgIH07CiAgICB9CiAg\nICAvLyBDYWxsIGZldGNoZXJzIHNpbXVsdGFuZW91c2x5LgogICAgYXN5bmMu\ncGFyYWxsZWwoZmV0Y2hlcnMsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAg\nICAgICAgaWYgKGVycikgewogICAgICAgICAgICByZXR1cm4gbWFpbkNhbGxi\nYWNrKGF0dGFjaFJlYWRhYmxlRXJyb3JNZXNzYWdlcyhlcnIpKTsKICAgICAg\nICB9CiAgICAgICAgaWYgKCEgcmVzdWx0Lmlzc3VlcykgewogICAgICAgICAg\nICAvLyBJZiB0aGVyZSBhcmUgbm8gaXNzdWVzIHRvIG1lcmdlIGludG8gdGhl\nIFBScywgd2UganVzdCByZXR1cm4gdGhlCiAgICAgICAgICAgIC8vIFBScy4K\nICAgICAgICAgICAgbWFpbkNhbGxiYWNrKGVyciwgcmVzdWx0LnBycyk7CiAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gSWYgYm90aCBQUnMgYW5k\nIGlzc3VlcyB3ZXJlIGZldGNoZWQsIHdlIG5lZWQgdG8gbWVyZ2UgaXNzdWUK\nICAgICAgICAgICAgLy8gcHJvcGVydGllcyBpbnRvIHRoZSBQUnMuCiAgICAg\nICAgICAgIG1haW5DYWxsYmFjayhlcnIsIG1lcmdlSXNzdWVzQW5kUHJzKHJl\nc3VsdC5pc3N1ZXMsIHJlc3VsdC5wcnMpKTsKICAgICAgICB9CiAgICB9KTsK\nfTsKCi8qKgogKiBSZXR1cm5zIGFsbCBtaWxlc3RvbmVzIGFjcm9zcyBtb25p\ndG9yZWQgcmVwb3MsIGdyb3VwZWQgYnkgdGl0bGUuIFVzZWZ1bCBmb3IKICog\nc3RhbmRhcmQgbWlsZXN0b25lIHBlcmlvZHMgbGlrZSBzcHJpbnRzLgogKiBA\ncGFyYW0gbWFpbkNhbGxiYWNrIHtmdW5jdGlvbn0gQ2FsbGVkIHdpdGggZXJy\nLCBtaWxlc3RvbmVzLgogKi8KU3ByaW50ZXIucHJvdG90eXBlLmdldE1pbGVz\ndG9uZXMgPSBmdW5jdGlvbihtYWluQ2FsbGJhY2spIHsKICAgIHZhciBtZSA9\nIHRoaXM7CiAgICB0aGlzLl9lYWNoUmVwb0ZsYXR0ZW5lZChmdW5jdGlvbihv\ncmcsIHJlcG8sIGxvY2FsQ2FsbGJhY2spIHsKICAgICAgICBtZS5fZmV0Y2hB\nbGxQYWdlcygKICAgICAgICAgICAgbWUuZ2guaXNzdWVzLmdldEFsbE1pbGVz\ndG9uZXMKICAgICAgICAgICwge3VzZXI6IG9yZywgcmVwbzogcmVwb30KICAg\nICAgICAgICwgbG9jYWxDYWxsYmFjawogICAgICAgICk7CiAgICB9LCBmdW5j\ndGlvbihlcnIsIG1pbGVzdG9uZXMpIHsKICAgICAgICBtYWluQ2FsbGJhY2so\nCiAgICAgICAgICAgIGF0dGFjaFJlYWRhYmxlRXJyb3JNZXNzYWdlcyhlcnIp\nCiAgICAgICAgICAsIF8uZ3JvdXBCeShtaWxlc3RvbmVzLCAndGl0bGUnKQog\nICAgICAgICk7CiAgICB9KTsKfTsKCi8qKgogKiBDbG9zZXMgYWxsIG1pbGVz\ndG9uZXMgYWNyb3NzIGFsbCBtb25pdG9yZWQgcmVwb3MgdGhhdCBtYXRjaCBn\naXZlbiB0aXRsZS4KICogQHBhcmFtIHRpdGxlIHtzdHJpbmd9IE1pbGVzdG9u\nZSB0byBkZWxldGUuCiAqIEBwYXJhbSBtYWluQ2FsbGJhY2sge2Z1bmN0aW9u\nfSBDYWxsZWQgd2l0aCBlcnIsIHVwZGF0ZWQgbWlsZXN0b25lcy4KICovClNw\ncmludGVyLnByb3RvdHlwZS5jbG9zZU1pbGVzdG9uZXMgPSBmdW5jdGlvbih0\naXRsZSwgbWFpbkNhbGxiYWNrKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAg\ndGhpcy5nZXRNaWxlc3RvbmVzKGZ1bmN0aW9uKGVyciwgbWlsZXN0b25lcykg\newogICAgICAgIHZhciBtYXRjaGVzOwogICAgICAgIGlmIChlcnIpIHsKICAg\nICAgICAgICAgbWFpbkNhbGxiYWNrKGF0dGFjaFJlYWRhYmxlRXJyb3JNZXNz\nYWdlKGVycikpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1hdGNo\nZXMgPSBtaWxlc3RvbmVzW3RpdGxlXTsKICAgICAgICAgICAgaWYgKCEgbWF0\nY2hlcykgewogICAgICAgICAgICAgICAgbWFpbkNhbGxiYWNrKG51bGwsIFtd\nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNv\nbGUubG9nKCdDbG9zaW5nICcgKyBtYXRjaGVzLmxlbmd0aCArICcgbWlsZXN0\nb25lcy4nKTsKICAgICAgICAgICAgICAgIHZhciB1cGRhdGVycyA9IF8ubWFw\nKG1hdGNoZXMsIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAg\nICAgdmFyIHNwbGl0U2x1ZyA9IG1hdGNoLnJlcG8uc3BsaXQoJy8nKTsKICAg\nICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24obG9jYWxDYWxsYmFj\naykgewogICAgICAgICAgICAgICAgICAgICAgICBtZS5naC5pc3N1ZXMudXBk\nYXRlTWlsZXN0b25lKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB1\nc2VyOiBzcGxpdFNsdWdbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICwgcmVwbzogc3BsaXRTbHVnWzFdCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAsIG51bWJlcjogbWF0Y2gubnVtYmVyCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAsIHRpdGxlOiBtYXRjaC50aXRsZQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgLCBzdGF0ZTogJ2Nsb3NlZCcKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAs\nIGxvY2FsQ2FsbGJhY2sKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAg\nICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAg\nICAgICAgICAgICBhc3luYy5wYXJhbGxlbCh1cGRhdGVycywgbWFpbkNhbGxi\nYWNrKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwp9OwoKLyoq\nCiAqIENyZWF0ZXMgdGhlIHNhbWUgbWlsZXN0b25lIGFjcm9zcyBhbGwgbW9u\naXRvcmVkIHJlcG9zLgogKiBAcGFyYW0gbWlsZXN0b25lIHtvYmplY3R9IFNo\nb3VsZCBjb250YWluIGEgdGl0bGUgYW5kIGR1ZV9vbi4KICogQHBhcmFtIG1h\naW5DYWxsYmFjayB7ZnVuY3Rpb259IENhbGxlZCB3aXRoIGVyciwgY3JlYXRl\nZCBtaWxlc3RvbmVzLgogKi8KU3ByaW50ZXIucHJvdG90eXBlLmNyZWF0ZU1p\nbGVzdG9uZXMgPSBmdW5jdGlvbihtaWxlc3RvbmUsIG1haW5DYWxsYmFjaykg\newogICAgdmFyIG1lID0gdGhpczsKICAgIHRoaXMuX2VhY2hSZXBvKGZ1bmN0\naW9uKG9yZywgcmVwbywgbG9jYWxDYWxsYmFjaykgewogICAgICAgIHZhciBw\nYXlsb2FkID0gXy5leHRlbmQoewogICAgICAgICAgICB1c2VyOiBvcmcKICAg\nICAgICAgICwgcmVwbzogcmVwbwogICAgICAgIH0sIG1pbGVzdG9uZSk7CiAg\nICAgICAgbWUuZ2guaXNzdWVzLmNyZWF0ZU1pbGVzdG9uZShwYXlsb2FkLCBs\nb2NhbENhbGxiYWNrKTsKICAgIH0sIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2Up\nIHsKICAgICAgICBtYWluQ2FsbGJhY2soYXR0YWNoUmVhZGFibGVFcnJvck1l\nc3NhZ2VzKGVyciksIHJlc3BvbnNlKTsKICAgIH0pOwp9OwoKLyoqCiAqIFVw\nZGF0ZXMgdGhlIHNhbWUgbWlsZXN0b25lIGFjcm9zcyBhbGwgbW9uaXRvcmVk\nIHJlcG9zLgogKiBAcGFyYW0gdGl0bGUge3N0cmluZ30gVGl0bGUgb2YgdGhl\nIG1pbGVzdG9uZSB0byBiZSB1cGRhdGVkLgogKiBAcGFyYW0gbWlsZXN0b25l\nIHtvYmplY3R9IE11c3QgY29udGFpbiBhdCBsZWFzdCBhIHRpdGxlIHRvIHVw\nZGF0ZS4KICogQHBhcmFtIG1haW5DYWxsYmFjayB7ZnVuY3Rpb259IENhbGxl\nZCB3aXRoIGVyciwgdXBkYXRlZCBtaWxlc3RvbmVzLgogKi8KU3ByaW50ZXIu\ncHJvdG90eXBlLnVwZGF0ZU1pbGVzdG9uZXMgPSBmdW5jdGlvbih0aXRsZSwg\nbWlsZXN0b25lLCBtYWluQ2FsbGJhY2spIHsKICAgIHZhciBtZSA9IHRoaXM7\nCiAgICB0aGlzLl9lYWNoUmVwbyhmdW5jdGlvbihvcmcsIHJlcG8sIGxvY2Fs\nQ2FsbGJhY2spIHsKICAgICAgICB2YXIgcGF5bG9hZCA9IHsKICAgICAgICAg\nICAgdXNlcjogb3JnCiAgICAgICAgICAsIHJlcG86IHJlcG8KICAgICAgICB9\nOwogICAgICAgIG1lLl9mZXRjaEFsbFBhZ2VzKG1lLmdoLmlzc3Vlcy5nZXRB\nbGxNaWxlc3RvbmVzLCBwYXlsb2FkLCAKICAgICAgICAgICAgZnVuY3Rpb24o\nZXJyLCBtaWxlc3RvbmVzKSB7CiAgICAgICAgICAgICAgICB2YXIgc2x1ZyA9\nIG9yZyArICcvJyArIHJlcG87CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7\nCiAgICAgICAgICAgICAgICAgICAgbG9jYWxDYWxsYmFjayhlcnIpOwogICAg\nICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YXIg\nbWF0Y2ggPSBfLmZpbmQobWlsZXN0b25lcywgZnVuY3Rpb24obWlsZXN0b25l\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlsZXN0\nb25lLnRpdGxlID09IHRpdGxlOwogICAgICAgICAgICAgICAgICAgICAgICB9\nKQogICAgICAgICAgICAgICAgICAgICAgLCByZXN1bHQgPSB1bmRlZmluZWQ7\nCiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgIHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIHJlcG86IHNsdWcKICAgICAgICAgICAgICAgICAgICAgICAgICAs\nIG51bWJlcjogbWF0Y2gubnVtYmVyCiAgICAgICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAg\nbG9jYWxDYWxsYmFjayhudWxsLCByZXN1bHQpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH0sIGZ1bmN0aW9uKGVy\nciwgbWlsZXN0b25lc1RvVXBkYXRlKSB7CiAgICAgICAgaWYgKGVycikgewog\nICAgICAgICAgICBtYWluQ2FsbGJhY2soYXR0YWNoUmVhZGFibGVFcnJvck1l\nc3NhZ2UoZXJyKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWUu\nX2VhY2hSZXBvKGZ1bmN0aW9uKG9yZywgcmVwbywgbWlsZXN0b25lVXBkYXRl\nQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIHZhciBzbHVnID0gb3JnICsg\nJy8nICsgcmVwbwogICAgICAgICAgICAgICAgICAsIG1pbGVzdG9uZVRvVXBk\nYXRlID0gXy5maW5kKAogICAgICAgICAgICAgICAgICAgICAgICBtaWxlc3Rv\nbmVzVG9VcGRhdGUKICAgICAgICAgICAgICAgICAgICAgICwgZnVuY3Rpb24o\nbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtcyAm\nJiBtcy5yZXBvID09IHNsdWc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICwgcGF5\nbG9hZCA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIGlmIChtaWxlc3Rv\nbmVUb1VwZGF0ZSkgewogICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSBf\nLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IG9yZwog\nICAgICAgICAgICAgICAgICAgICAgLCByZXBvOiByZXBvCiAgICAgICAgICAg\nICAgICAgICAgICAsIG51bWJlcjogbWlsZXN0b25lVG9VcGRhdGUubnVtYmVy\nCiAgICAgICAgICAgICAgICAgICAgfSwgbWlsZXN0b25lKTsKICAgICAgICAg\nICAgICAgICAgICBtZS5naC5pc3N1ZXMudXBkYXRlTWlsZXN0b25lKAogICAg\nICAgICAgICAgICAgICAgICAgICBwYXlsb2FkCiAgICAgICAgICAgICAgICAg\nICAgICAsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBlcnIucmVwbyA9IG9yZyArICcvJyArIHJlcG87CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIG1pbGVzdG9uZVVwZGF0ZUNhbGxiYWNr\nKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlsZXN0b25lVXBkYXRlQ2Fs\nbGJhY2soZXJyLCByZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg\nICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBtYWluQ2Fs\nbGJhY2spOwogICAgICAgIH0KICAgIH0pOwp9OwoKLyoqCiAqIENyZWF0ZXMg\ndGhlIHNhbWUgbGFiZWxzIGFjcm9zcyBhbGwgbW9uaXRvcmVkIHJlcG9zLgog\nKiBAcGFyYW0gbGFiZWxzIHtBcnJheX0gU2hvdWxkIGJlIGEgbGlzdCBvZiBv\nYmplY3RzLCBlYWNoIHdpdGggYSBuYW1lIGFuZCBoZXggCiAqICAgICAgICAg\nICAgICAgICAgICAgICBjb2xvciAod2l0aG91dCB0aGUgIykuCiAqIEBwYXJh\nbSBtYWluQ2FsbGJhY2sge2Z1bmN0aW9ufSBDYWxsZWQgd2l0aCBlcnIsIGNy\nZWF0ZWQgbGFiZWxzLgogKi8KU3ByaW50ZXIucHJvdG90eXBlLmNyZWF0ZUxh\nYmVscyA9IGZ1bmN0aW9uKGxhYmVscywgbWFpbkNhbGxiYWNrKSB7CiAgICB2\nYXIgbWUgPSB0aGlzOwogICAgdGhpcy5fZWFjaFJlcG8oZnVuY3Rpb24ob3Jn\nLCByZXBvLCBsb2NhbENhbGxiYWNrKSB7CiAgICAgICAgdmFyIGNyZWF0ZUZ1\nbmN0aW9ucyA9IF8ubWFwKGxhYmVscywgZnVuY3Rpb24obGFiZWxTcGVjKSB7\nCiAgICAgICAgICAgIHZhciBwYXlsb2FkID0gXy5leHRlbmQoewogICAgICAg\nICAgICAgICAgdXNlcjogb3JnCiAgICAgICAgICAgICAgLCByZXBvOiByZXBv\nCiAgICAgICAgICAgIH0sIGxhYmVsU3BlYyk7CiAgICAgICAgICAgIHJldHVy\nbiBmdW5jdGlvbihjYWxsYmFjaykgewogICAgICAgICAgICAgICAgbWUuZ2gu\naXNzdWVzLmNyZWF0ZUxhYmVsKHBheWxvYWQsIGZ1bmN0aW9uKGVyciwgcmVz\ncCkgewogICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgZXJyLnJlcG8gPSBvcmcgKyAnLycgKyByZXBvOwog\nICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpOwogICAgICAg\nICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGNhbGxiYWNrKGVyciwgcmVzcCk7CiAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSk7\nCiAgICAgICAgYXN5bmMucGFyYWxsZWwoY3JlYXRlRnVuY3Rpb25zLCBsb2Nh\nbENhbGxiYWNrKTsKICAgIH0sIGZ1bmN0aW9uKGVycnMsIHJlc3BvbnNlKSB7\nCiAgICAgICAgaWYgKGVycnMpIHsKICAgICAgICAgICAgbWFpbkNhbGxiYWNr\nKGF0dGFjaFJlYWRhYmxlRXJyb3JNZXNzYWdlcyhlcnJzKSk7CiAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgbWFpbkNhbGxiYWNrKGVycnMsIHJlc3Bv\nbnNlKTsKICAgICAgICB9CiAgICB9KTsKfTsKCi8qKgogKiBSZXR1cm5zIGFs\nbCBsYWJlbHMgYWNyb3NzIG1vbml0b3JlZCByZXBvcy4gQWxzbyBhdHRhY2hl\ncyBhICJyZXBvIiBhdHRyaWJ1dGUKICogc28gdXNlcnMgY2FuIHRlbGwgd2hh\ndCByZXBvIGxhYmVscyBhcmUgY29taW5nIGZyb20uCiAqIEBwYXJhbSBtYWlu\nQ2FsbGJhY2sge2Z1bmN0aW9ufSBDYWxsZWQgd2l0aCBlcnIsIGxhYmVscy4K\nICovClNwcmludGVyLnByb3RvdHlwZS5nZXRMYWJlbHMgPSBmdW5jdGlvbiht\nYWluQ2FsbGJhY2spIHsKICAgIHZhciBtZSA9IHRoaXM7CiAgICB0aGlzLl9l\nYWNoUmVwb0ZsYXR0ZW5lZChmdW5jdGlvbihvcmcsIHJlcG8sIGxvY2FsQ2Fs\nbGJhY2spIHsKICAgICAgICBtZS5fZmV0Y2hBbGxQYWdlcygKICAgICAgICAg\nICAgbWUuZ2guaXNzdWVzLmdldExhYmVscywge3VzZXI6IG9yZywgcmVwbzog\ncmVwb30sIGxvY2FsQ2FsbGJhY2sKICAgICAgICApOwogICAgfSwgZnVuY3Rp\nb24oZXJyLCBsYWJlbHMpIHsKICAgICAgICBtYWluQ2FsbGJhY2soYXR0YWNo\nUmVhZGFibGVFcnJvck1lc3NhZ2VzKGVyciksIGxhYmVscyk7CiAgICB9KTsK\nfTsKCi8qKgogKiBSZXR1cm5zIGFsbCBjb2xsYWJvcmF0b3JzIGFjcm9zcyBt\nb25pdG9yZWQgcmVwb3MuCiAqIEBwYXJhbSBtYWluQ2FsbGJhY2sge2Z1bmN0\naW9ufSBDYWxsZWQgd2l0aCBlcnIsIGNvbGxhYm9yYXRvcnMuCiAqLwpTcHJp\nbnRlci5wcm90b3R5cGUuZ2V0Q29sbGFib3JhdG9ycyA9IGZ1bmN0aW9uKG1h\naW5DYWxsYmFjaykgewogICAgdmFyIG1lID0gdGhpczsKICAgIHRoaXMuX2Vh\nY2hSZXBvRmxhdHRlbmVkKGZ1bmN0aW9uKG9yZywgcmVwbywgbG9jYWxDYWxs\nYmFjaykgewogICAgICAgIG1lLl9mZXRjaEFsbFBhZ2VzKAogICAgICAgICAg\nICBtZS5naC5yZXBvcy5nZXRDb2xsYWJvcmF0b3JzLCB7dXNlcjogb3JnLCBy\nZXBvOiByZXBvfSwgbG9jYWxDYWxsYmFjawogICAgICAgICk7CiAgICB9LCBm\ndW5jdGlvbihlcnIsIGNvbGxhYm9yYXRvcnMpIHsKICAgICAgICBtYWluQ2Fs\nbGJhY2soCiAgICAgICAgICAgIGF0dGFjaFJlYWRhYmxlRXJyb3JNZXNzYWdl\ncyhlcnIpCiAgICAgICAgICAsIGRlZHVwbGljYXRlQ29sbGFib3JhdG9ycyhj\nb2xsYWJvcmF0b3JzKQogICAgICAgICk7CiAgICB9KTsKfTsKCi8qIFN0YXNo\nZXMgb3JpZ2luYWwgcHJvdG90eXBlIGZ1bmN0aW9ucyBvZiBTcHJpbnRlciBm\nb3IgdXNlIGluIGNhY2hpbmcuICovCl8uZWFjaChTcHJpbnRlci5wcm90b3R5\ncGUsIGZ1bmN0aW9uKGZuLCBuYW1lKSB7CiAgICBpZiAobmFtZS5pbmRleE9m\nKCdnZXQnKSA9PSAwKSB7CiAgICAgICAgb3JpZ2luYWxQcm90b3R5cGVGdW5j\ndGlvbnNbbmFtZV0gPSBmbjsKICAgIH0KfSk7Cgptb2R1bGUuZXhwb3J0cyA9\nIFNwcmludGVyOwo=\n",
    "encoding": "base64"
};